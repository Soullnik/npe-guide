import{A as c,v as d,x as h}from"./chunk-DYR6BFEB.js";import{g as r,h as l}from"./chunk-TTEXIRIC.js";import{e as a}from"./chunk-FAF55DAL.js";var p,m=a(()=>{"use strict";l();p=class{constructor(t,e,i){if(this._autoUpdate=!0,this._lastUpdateTime=0,this.minUpdateTime=0,!e)return;this.minUpdateTime=i;let s=()=>{if(!this._autoUpdate)return;let o=!1;if(0<this.minUpdateTime){let n=r.Now;this._lastUpdateTime&&n-this._lastUpdateTime<this.minUpdateTime&&(o=!0),this._lastUpdateTime=n}o||t.update(),requestAnimationFrame(s)};requestAnimationFrame(s)}dispose(){this._autoUpdate=!1}}});var u,f=a(()=>{"use strict";c();u=class{constructor(t){this._attachmentType=3,this._position=new d,this._rotationQuaternion=new h,this._sceneNode=null,this._useBoundingBox=!1,this.dispose=()=>{this.detach()},this._spatialAudioNode=t}get isAttached(){return this._sceneNode!==null}attach(t,e,i){this._sceneNode!==t&&(this.detach(),t&&(this._attachmentType=i,this._sceneNode=t,this._sceneNode.onDisposeObservable.add(this.dispose),this._useBoundingBox=e))}detach(){this._sceneNode?.onDisposeObservable.removeCallback(this.dispose),this._sceneNode=null}update(){this._attachmentType&1&&(this._useBoundingBox&&this._sceneNode.getBoundingInfo?this._position.copyFrom(this._sceneNode.getBoundingInfo().boundingBox.centerWorld):this._sceneNode?.getWorldMatrix().getTranslationToRef(this._position),this._spatialAudioNode.position.copyFrom(this._position),this._spatialAudioNode._updatePosition()),this._attachmentType&2&&(this._sceneNode?.getWorldMatrix().decompose(void 0,this._rotationQuaternion),this._spatialAudioNode.rotationQuaternion.copyFrom(this._rotationQuaternion),this._spatialAudioNode._updateRotation())}}});export{u as a,f as b,p as c,m as d};
