{
  "title": "4.2: Texture Animation and Sprite Sheets",
  "summary": "Learn to create animated particle textures using sprite sheets and cell index updates",
  "introTitle": "Introduction",
  "intro": "In this lesson, you'll learn how to use SetupSpriteSheet and BasicSpriteUpdate blocks to create animated particle textures. Sprite sheets allow you to display different frames of animation on particles, creating effects like animated flames, explosions, or other dynamic visual effects. You'll learn to configure sprite sheet properties and animation speed using spriteCellChangeSpeed for automatic sprite animation.",
  "stepsTitle": "Step-by-Step Instructions",
  "steps": [
    "Create a <filter-value>System</filter-value> block - this is the root of your particle system",
    "Add a <filter-value>Texture</filter-value> block to provide a texture for the particles and connect to System block",
    "Load a sprite sheet texture <textures>player.png</textures> by load button in the Texture block properties",
    "Add a <filter-value>CreateParticle</filter-value> block to emit particles and connect to System block",
    "Add a <filter-value>Float</filter-value> block for Emit Power and set its value to 1.0",
    "Connect the Float block's output to CreateParticle block's emitPower input",
    "Add a <filter-value>Float</filter-value> block for Lifetime and set its value to 10.0",
    "Connect the Float block's output to CreateParticle block's lifeTime input",
    "Add a <filter-value>BoxShape</filter-value> block to emit particles from a box volume and connect between CreateParticle and System blocks",
    "Add a <filter-value>Vector3</filter-value> block for Direction and set its value to (-2.0, 0.0, 0.0)",
    "Connect the Vector3 block's output to BoxShape block's direction1 and direction2 inputs",
    "Add a <filter-value>Vector3</filter-value> block for Min Emit Box and set its value to (-1.0, 0.0, -0.3)",
    "Connect the Vector3 block's output to BoxShape block's minEmitBox input",
    "Add a <filter-value>Vector3</filter-value> block for Max Emit Box and set its value to (0.0, 0.0, 0.3)",
    "Connect the Vector3 block's output to BoxShape block's maxEmitBox input",
    "Add a <filter-value>SetupSpriteSheet</filter-value> block to configure the sprite sheet and connect between BoxShape and System blocks",
    "Set the sprite sheet properties in SetupSpriteSheet block: Start (0), End (9), Width (64), Height (64)",
    "Enable Loop in SetupSpriteSheet block properties",
    "Set Random Start Cell to false in SetupSpriteSheet block properties",
    "Set Sprite Cell Change Speed to 30 in SetupSpriteSheet block properties (this controls animation speed)",
    "Add <filter-value>UpdatePosition</filter-value> block after SetupSpriteSheet block and connect to System block",
    "Add a <filter-value>Position</filter-value> block to get the particle's current position",
    "Add a <filter-value>Scaled Direction</filter-value> block to get the particle's scaled direction",
    "Add a math <filter-value>Add</filter-value> block to calculate new position (Position + Scaled Direction)",
    "Connect Position block to Add block's left input and Scaled Direction block to right input",
    "Connect Add block's output to UpdatePosition block's position input",
    "Add <filter-value>BasicSpriteUpdate</filter-value> block after UpdatePosition block and connect to System block",
    "The BasicSpriteUpdate block automatically updates sprite cells based on spriteCellChangeSpeed from SetupSpriteSheet"
  ],
  "blocksTitle": "Blocks Used in This Lesson",
  "blocks": [
    {
      "name": "Setup Sprite Sheet Block",
      "description": "Configures a sprite sheet for particles. Defines the start and end cell indices, cell dimensions, animation speed, and behavior. In the visual editor, you can find this block in the block list and configure its properties in the properties panel on the right.",
      "properties": [
        {
          "name": "Start",
          "value": "0",
          "description": "The starting cell index of the sprite sheet. Set this in the properties panel on the right side of the editor."
        },
        {
          "name": "End",
          "value": "9",
          "description": "The ending cell index of the sprite sheet. Set this in the properties panel on the right side of the editor."
        },
        {
          "name": "Width",
          "value": "64",
          "description": "The width of each sprite cell in pixels. Set this in the properties panel on the right side of the editor."
        },
        {
          "name": "Height",
          "value": "64",
          "description": "The height of each sprite cell in pixels. Set this in the properties panel on the right side of the editor."
        },
        {
          "name": "Loop",
          "value": "true",
          "description": "Whether the sprite sheet animation should loop. Set this in the properties panel on the right side of the editor."
        },
        {
          "name": "Random Start Cell",
          "value": "false",
          "description": "Whether particles should start at a random cell. Set this in the properties panel on the right side of the editor."
        },
        {
          "name": "Sprite Cell Change Speed",
          "value": "Float (e.g., 30)",
          "description": "How many frames to wait before changing to the next sprite cell. Higher values mean slower animation. Set this in the properties panel on the right side of the editor."
        }
      ]
    },
    {
      "name": "Basic Sprite Update Block",
      "description": "Automatically updates the sprite cell index of a particle based on the 'Sprite Cell Change Speed' defined in the SetupSpriteSheet block. This block simplifies sprite animation by handling the cell index calculation automatically. In the visual editor, you can find this block in the block list and configure its properties in the properties panel on the right.",
      "properties": []
    },
    {
      "name": "Box Shape Block",
      "description": "Emits particles from the volume of a box. Used to define the initial emission shape. In the visual editor, you can find this block in the block list and configure its properties in the properties panel on the right.",
      "properties": [
        {
          "name": "Direction 1",
          "value": "Vector3 input",
          "description": "The first direction vector for particle emission. Connect a Vector3 output to this input."
        },
        {
          "name": "Direction 2",
          "value": "Vector3 input",
          "description": "The second direction vector for particle emission. Particles will be emitted with a direction interpolated between Direction 1 and Direction 2. Connect a Vector3 output to this input."
        },
        {
          "name": "Min Emit Box",
          "value": "Vector3 input",
          "description": "The minimum bounds of the emission box. Connect a Vector3 output to this input."
        },
        {
          "name": "Max Emit Box",
          "value": "Vector3 input",
          "description": "The maximum bounds of the emission box. Connect a Vector3 output to this input."
        }
      ]
    },
    {
      "name": "Update Position Block",
      "description": "Updates the position of particles each frame. This block is essential for any particle movement. In the visual editor, you can find this block in the block list and configure its properties in the properties panel on the right.",
      "properties": [
        {
          "name": "Position",
          "value": "Vector3 input",
          "description": "The new position vector to apply to the particle. Connect a Vector3 output to this input."
        }
      ]
    }
  ],
  "properties": "Properties",
  "codeTitle": "Code Explanation",
  "codeCopy": "This lesson demonstrates sprite sheet animation. A sprite sheet is a texture containing multiple frames of animation arranged in a grid. By using SetupSpriteSheet block with 'Sprite Cell Change Speed' and BasicSpriteUpdate block, we create smooth animations automatically. The 'Sprite Cell Change Speed' property controls how many frames pass before the sprite changes to the next cell. This creates dynamic visual effects like animated flames, smoke, explosions, and other dynamic visual elements.",
  "objectivesTitle": "Learning Objectives",
  "objectives": [
    "Configure sprite sheets using SetupSpriteSheet block",
    "Understand how 'Sprite Cell Change Speed' controls animation speed",
    "Use BasicSpriteUpdate block for automatic sprite animation",
    "Create smooth sprite sheet animations over particle lifetime"
  ],
  "commonMistakesTitle": "Common Mistakes",
  "commonMistakes": [
    {
      "mistake": "Forgetting to set 'Sprite Cell Change Speed' in SetupSpriteSheet block",
      "explanation": "Without setting 'Sprite Cell Change Speed', the animation won't progress automatically. Particles will display only the first frame.",
      "solution": "Always set 'Sprite Cell Change Speed' to a positive value (e.g., 30) in the SetupSpriteSheet block properties. This controls how many frames pass before the sprite changes."
    },
    {
      "mistake": "Not connecting BasicSpriteUpdate block in the particle chain",
      "explanation": "The BasicSpriteUpdate block must be connected in the particle processing chain (e.g., after UpdatePosition and before System) for the animation to apply.",
      "solution": "Ensure the particle output from UpdatePosition block is connected to the particle input of BasicSpriteUpdate block, and its output is connected to the System block."
    },
    {
      "mistake": "Using a texture that is not a sprite sheet",
      "explanation": "Sprite sheet animation requires a texture specifically designed as a grid of animation frames. Using a regular image will not produce animation.",
      "solution": "Ensure your texture is a valid sprite sheet with multiple frames arranged in a grid. The 'Width' and 'Height' properties in SetupSpriteSheet block should match the dimensions of a single cell in your sprite sheet."
    }
  ],
  "homeworkTitle": "Practice Exercises",
  "homework": [
    "Try different 'Sprite Cell Change Speed' values to see how it affects animation speed",
    "Experiment with 'Random Start Cell' to create varied animations",
    "Create sprite animations that speed up or slow down based on particle properties (e.g., using Age and Lerp blocks to control 'Sprite Cell Change Speed')",
    "Combine sprite animation with color changes for more dynamic effects",
    "Try creating a sprite sheet with your own texture and test different cell arrangements"
  ]
}