{
  "title": "6.3: Performance Optimization",
  "summary": "Learn best practices for optimizing particle system performance",
  "introTitle": "Introduction",
  "intro": "In this lesson, you'll learn best practices for optimizing particle system performance. You'll create a complete, optimized particle system from scratch that demonstrates efficient block usage, minimal calculations, and performance-focused design patterns.",
  "stepsTitle": "Step-by-Step Instructions",
  "steps": [
    "Create a <filter-value>System</filter-value> block - this is the root of your particle system",
    "Add a <filter-value>Texture</filter-value> block to provide a texture for the particles and connect to System block",
    "Load a texture <textures>flare.png</textures> by load button in the Texture block properties",
    "Add a <filter-value>CreateParticle</filter-value> block to emit particles and connect to System block",
    "Add a <filter-value>Color4</filter-value> block and set its value to a base color",
    "Connect the Color4 block's output to CreateParticle block's color input",
    "Add a <filter-value>Float</filter-value> block and set its value to a smaller base size (e.g., 0.2) for better performance",
    "Connect the Float block's output to CreateParticle block's size input",
    "Add a <filter-value>BoxShape</filter-value> block to emit particles from a box volume and connect between CreateParticle and System blocks",
    "Add <filter-value>UpdatePosition</filter-value> block after BoxShape and connect to System block",
    "Add a <filter-value>Position</filter-value> block to get the particle's current position",
    "Add a <filter-value>Scaled Direction</filter-value> block to get the particle's scaled direction",
    "Add a math <filter-value>Add</filter-value> block to calculate new position (Position + Scaled Direction)",
    "Connect Position block to Add block's left input and Scaled Direction block to right input",
    "Connect Add block's output to UpdatePosition block's position input",
    "Add <filter-value>UpdateColor</filter-value> block after UpdatePosition and connect InitialColor contextual value to it (no recalculation needed)",
    "Add <filter-value>UpdateSize</filter-value> block after UpdateColor with constant size (connect InitialSize contextual value, no per-frame calculations)",
    "Connect UpdateSize output to System block",
    "Observe the optimized system running smoothly"
  ],
  "blocksTitle": "Blocks Used in This Lesson",
  "blocks": [
    {
      "name": "Performance Best Practices",
      "description": "This lesson focuses on optimization techniques rather than new blocks. Key principles: use contextual values when possible, minimize per-frame calculations, use constant values where appropriate, and keep block chains simple. In the visual editor, you can find these blocks in the block list and configure their properties in the properties panel on the right.",
      "properties": []
    }
  ],
  "properties": "Properties",
  "codeTitle": "Code Explanation",
  "codeCopy": "Performance optimization in particle systems involves minimizing computational overhead. Use contextual values (like InitialColor) instead of recalculating, use constant values for properties that don't change, minimize the number of math operations per frame, and keep block chains as simple as possible. Smaller particle sizes and efficient textures also help performance.",
  "objectivesTitle": "Learning Objectives",
  "objectives": [
    "Understand performance optimization principles",
    "Learn to use contextual values efficiently",
    "Minimize per-frame calculations",
    "Design efficient block chains",
    "Apply optimization techniques to real systems"
  ],
  "commonMistakesTitle": "Common Mistakes",
  "commonMistakes": [
    {
      "mistake": "Over-calculating values every frame",
      "explanation": "Recalculating values that don't change (like initial color) every frame wastes performance. Use contextual values or constant inputs instead.",
      "solution": "Use InitialColor, InitialSize, and other contextual values when you need the original particle property. Only recalculate when values actually change."
    },
    {
      "mistake": "Creating unnecessarily complex block chains",
      "explanation": "Complex chains with many math operations per frame can slow down performance, especially with many particles.",
      "solution": "Simplify block chains where possible. Combine calculations, use contextual values, and avoid redundant operations."
    }
  ],
  "homeworkTitle": "Practice Exercises",
  "homework": [
    "Optimize an existing particle system by simplifying calculations",
    "Compare performance between optimized and unoptimized systems",
    "Experiment with different particle sizes to find the performance sweet spot",
    "Use contextual values to replace unnecessary calculations",
    "Create a high-performance particle system with thousands of particles"
  ]
}

