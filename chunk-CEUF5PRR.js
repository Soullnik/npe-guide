import{a as f,b}from"./chunk-MEUTOEEX.js";import{c,d as T}from"./chunk-2AUPWM7R.js";import{e as _}from"./chunk-FAF55DAL.js";function S(){if(!u){u=new Float32Array(a);let r=1/(a-1),e=r;for(let t=1;t<a;t++)u[t]=Math.exp(-11.512925464970227*(1-e)),e+=r}return u}function C(){if(!h){h=new Float32Array(a);let r=1/a,e=r;for(let t=0;t<a;t++)h[t]=1+Math.log10(e)/Math.log10(a),e+=r}return h}function g(r,e,t){l||(l=new Float32Array(a));let s;if(r==="linear")return p[0]=e,p[1]=t,p;if(r==="exponential")s=S();else if(r==="logarithmic")s=C();else throw new Error(`Unknown ramp shape: ${r}`);let o=Math.sign(t-e),i=Math.abs(t-e);if(o===1)for(let n=0;n<s.length;n++)l[n]=e+i*s[n];else{let n=a-1;for(let m=0;m<s.length;m++,n--)l[m]=e-i*(1-s[n])}return l}function A(r){return r.replace(/#/gm,"%23")}var E,a,p,l,u,h,w=_(()=>{"use strict";E=new RegExp("\\.(\\w{3,4})($|\\?)"),a=100,p=new Float32Array([0,0]),l=null,u=null,h=null});var V,v,x,U=_(()=>{"use strict";b();w();V=1e-6,v=!0,x=class{constructor(e,t){this._rampEndTime=0,this._engine=e,this._param=t,this._targetValue=t.value}get isRamping(){return this._engine.currentTime<this._rampEndTime}get targetValue(){return this._targetValue}set targetValue(e){this.setTargetValue(e)}get value(){return this._param.value}dispose(){this._param=null,this._engine=null}setTargetValue(e,t=null){if(!Number.isFinite(e)){f.Warn(`Attempted to set audio parameter to non-finite value: ${e}`);return}this._param.cancelScheduledValues(0);let s=typeof t?.shape=="string"?t.shape:"linear",o=this._engine.currentTime;if(s==="none"){this._param.value=this._targetValue=e,this._rampEndTime=o;return}let i=typeof t?.duration=="number"?Math.max(t.duration,this._engine.parameterRampDuration):this._engine.parameterRampDuration;if(this._targetValue=e,(i=Math.max(this._engine.parameterRampDuration,i))<V){this._param.setValueAtTime(e,o);return}try{this._param.setValueCurveAtTime(g(s,Number.isFinite(this._param.value)?this._param.value:0,e),o,i),this._rampEndTime=o+i}catch(n){v&&(f.Warn(`Audio parameter ramping failed: ${n.message}`),v=!1)}}}});var D,d,N,O=_(()=>{"use strict";T();D=(function(r){return r[r.HAS_INPUTS=1]="HAS_INPUTS",r[r.HAS_OUTPUTS=2]="HAS_OUTPUTS",r[r.HAS_INPUTS_AND_OUTPUTS=3]="HAS_INPUTS_AND_OUTPUTS",r})(D||{}),d=class{constructor(e,t){this.onDisposeObservable=new c,this.engine=e,t&1&&(this._upstreamNodes=new Set),t&2&&(this._downstreamNodes=new Set)}dispose(){if(this._downstreamNodes){for(let e of Array.from(this._downstreamNodes))if(!this._disconnect(e))throw new Error("Disconnect failed");this._downstreamNodes.clear()}if(this._upstreamNodes){for(let e of Array.from(this._upstreamNodes))if(!e._disconnect(this))throw new Error("Disconnect failed");this._upstreamNodes.clear()}this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear()}_connect(e){return!this._downstreamNodes||this._downstreamNodes.has(e)||!e._onConnect(this)?!1:(this._downstreamNodes.add(e),!0)}_disconnect(e){return!this._downstreamNodes||!this._downstreamNodes.delete(e)?!1:e._onDisconnect(this)}_onConnect(e){return!this._upstreamNodes||this._upstreamNodes.has(e)?!1:(this._upstreamNodes.add(e),!0)}_onDisconnect(e){return this._upstreamNodes?.delete(e)??!1}},N=class extends d{constructor(e,t,s){super(t,s),this.onNameChangedObservable=new c,this._name=e}get name(){return this._name}set name(e){if(this._name===e)return;let t=this._name;this._name=e,this.onNameChangedObservable.notifyObservers({newName:e,oldName:t,node:this})}dispose(){super.dispose(),this.onNameChangedObservable.clear()}}});export{E as a,A as b,w as c,x as d,U as e,D as f,d as g,N as h,O as i};
