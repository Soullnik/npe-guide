import{b as F,d as ee}from"./chunk-W4CEKQI7.js";import{a as ae,b as Ee}from"./chunk-JZRHVK4S.js";import{b as ie}from"./chunk-F6VQTDND.js";import{b as ne}from"./chunk-7WAK3VD7.js";import{b as le}from"./chunk-O6SXCXKG.js";import{b as se}from"./chunk-EUALCU5W.js";import{b as oe}from"./chunk-AEECYACG.js";import{b as re}from"./chunk-CFG3P2H7.js";import{a as d,h as j}from"./chunk-LNRYW27M.js";import{a as L,b as $}from"./chunk-GXAWC6TE.js";import{j as m,k as _,l as J}from"./chunk-RIAPI5OR.js";import{n as S,o as te}from"./chunk-C2NDYXG7.js";import{V as T,W as q}from"./chunk-WFRBO4E6.js";import{A as D,v as C}from"./chunk-DYR6BFEB.js";import{c as h,d as K}from"./chunk-YZFDUSX3.js";import{a as O,b as x}from"./chunk-MEUTOEEX.js";import{a as I,b as U}from"./chunk-RR3YIVG4.js";import{e as P}from"./chunk-FAF55DAL.js";function Me(t){t.indexOf("vClipPlane")===-1&&t.push("vClipPlane"),t.indexOf("vClipPlane2")===-1&&t.push("vClipPlane2"),t.indexOf("vClipPlane3")===-1&&t.push("vClipPlane3"),t.indexOf("vClipPlane4")===-1&&t.push("vClipPlane4"),t.indexOf("vClipPlane5")===-1&&t.push("vClipPlane5"),t.indexOf("vClipPlane6")===-1&&t.push("vClipPlane6")}function he(t,r,e){let a=!!(t.clipPlane??r.clipPlane),i=!!(t.clipPlane2??r.clipPlane2),l=!!(t.clipPlane3??r.clipPlane3),n=!!(t.clipPlane4??r.clipPlane4),s=!!(t.clipPlane5??r.clipPlane5),u=!!(t.clipPlane6??r.clipPlane6);a&&e.push("#define CLIPPLANE"),i&&e.push("#define CLIPPLANE2"),l&&e.push("#define CLIPPLANE3"),n&&e.push("#define CLIPPLANE4"),s&&e.push("#define CLIPPLANE5"),u&&e.push("#define CLIPPLANE6")}function b(t,r,e){let a=!1,i=!!(t.clipPlane??r.clipPlane),l=!!(t.clipPlane2??r.clipPlane2),n=!!(t.clipPlane3??r.clipPlane3),s=!!(t.clipPlane4??r.clipPlane4),u=!!(t.clipPlane5??r.clipPlane5),A=!!(t.clipPlane6??r.clipPlane6);return e.CLIPPLANE!==i&&(e.CLIPPLANE=i,a=!0),e.CLIPPLANE2!==l&&(e.CLIPPLANE2=l,a=!0),e.CLIPPLANE3!==n&&(e.CLIPPLANE3=n,a=!0),e.CLIPPLANE4!==s&&(e.CLIPPLANE4=s,a=!0),e.CLIPPLANE5!==u&&(e.CLIPPLANE5=u,a=!0),e.CLIPPLANE6!==A&&(e.CLIPPLANE6=A,a=!0),a}function De(t,r,e){let a=r.clipPlane??e.clipPlane;f(t,"vClipPlane",a),a=r.clipPlane2??e.clipPlane2,f(t,"vClipPlane2",a),a=r.clipPlane3??e.clipPlane3,f(t,"vClipPlane3",a),a=r.clipPlane4??e.clipPlane4,f(t,"vClipPlane4",a),a=r.clipPlane5??e.clipPlane5,f(t,"vClipPlane5",a),a=r.clipPlane6??e.clipPlane6,f(t,"vClipPlane6",a)}function f(t,r,e){if(e){let a=d.getScene()?.floatingOriginOffset||C.ZeroReadOnly;t.setFloat4(r,e.normal.x,e.normal.y,e.normal.z,e.d+C.Dot(e.normal,a))}}var g=P(()=>{"use strict";j();D()});var N,H=P(()=>{"use strict";q();N=(()=>{class t{static get DiffuseTextureEnabled(){return this._DiffuseTextureEnabled}static set DiffuseTextureEnabled(e){this._DiffuseTextureEnabled!==e&&(this._DiffuseTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get BaseWeightTextureEnabled(){return this._BaseWeightTextureEnabled}static set BaseWeightTextureEnabled(e){this._BaseWeightTextureEnabled!==e&&(this._BaseWeightTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get BaseDiffuseRoughnessTextureEnabled(){return this._BaseDiffuseRoughnessTextureEnabled}static set BaseDiffuseRoughnessTextureEnabled(e){this._BaseDiffuseRoughnessTextureEnabled!==e&&(this._BaseDiffuseRoughnessTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get DetailTextureEnabled(){return this._DetailTextureEnabled}static set DetailTextureEnabled(e){this._DetailTextureEnabled!==e&&(this._DetailTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get DecalMapEnabled(){return this._DecalMapEnabled}static set DecalMapEnabled(e){this._DecalMapEnabled!==e&&(this._DecalMapEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get AmbientTextureEnabled(){return this._AmbientTextureEnabled}static set AmbientTextureEnabled(e){this._AmbientTextureEnabled!==e&&(this._AmbientTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get OpacityTextureEnabled(){return this._OpacityTextureEnabled}static set OpacityTextureEnabled(e){this._OpacityTextureEnabled!==e&&(this._OpacityTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get ReflectionTextureEnabled(){return this._ReflectionTextureEnabled}static set ReflectionTextureEnabled(e){this._ReflectionTextureEnabled!==e&&(this._ReflectionTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get EmissiveTextureEnabled(){return this._EmissiveTextureEnabled}static set EmissiveTextureEnabled(e){this._EmissiveTextureEnabled!==e&&(this._EmissiveTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get SpecularTextureEnabled(){return this._SpecularTextureEnabled}static set SpecularTextureEnabled(e){this._SpecularTextureEnabled!==e&&(this._SpecularTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get BumpTextureEnabled(){return this._BumpTextureEnabled}static set BumpTextureEnabled(e){this._BumpTextureEnabled!==e&&(this._BumpTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get LightmapTextureEnabled(){return this._LightmapTextureEnabled}static set LightmapTextureEnabled(e){this._LightmapTextureEnabled!==e&&(this._LightmapTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get RefractionTextureEnabled(){return this._RefractionTextureEnabled}static set RefractionTextureEnabled(e){this._RefractionTextureEnabled!==e&&(this._RefractionTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get ColorGradingTextureEnabled(){return this._ColorGradingTextureEnabled}static set ColorGradingTextureEnabled(e){this._ColorGradingTextureEnabled!==e&&(this._ColorGradingTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get FresnelEnabled(){return this._FresnelEnabled}static set FresnelEnabled(e){this._FresnelEnabled!==e&&(this._FresnelEnabled=e,T.MarkAllMaterialsAsDirty(4))}static get ClearCoatTextureEnabled(){return this._ClearCoatTextureEnabled}static set ClearCoatTextureEnabled(e){this._ClearCoatTextureEnabled!==e&&(this._ClearCoatTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get ClearCoatBumpTextureEnabled(){return this._ClearCoatBumpTextureEnabled}static set ClearCoatBumpTextureEnabled(e){this._ClearCoatBumpTextureEnabled!==e&&(this._ClearCoatBumpTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get ClearCoatTintTextureEnabled(){return this._ClearCoatTintTextureEnabled}static set ClearCoatTintTextureEnabled(e){this._ClearCoatTintTextureEnabled!==e&&(this._ClearCoatTintTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get SheenTextureEnabled(){return this._SheenTextureEnabled}static set SheenTextureEnabled(e){this._SheenTextureEnabled!==e&&(this._SheenTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get AnisotropicTextureEnabled(){return this._AnisotropicTextureEnabled}static set AnisotropicTextureEnabled(e){this._AnisotropicTextureEnabled!==e&&(this._AnisotropicTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get ThicknessTextureEnabled(){return this._ThicknessTextureEnabled}static set ThicknessTextureEnabled(e){this._ThicknessTextureEnabled!==e&&(this._ThicknessTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get RefractionIntensityTextureEnabled(){return this._ThicknessTextureEnabled}static set RefractionIntensityTextureEnabled(e){this._RefractionIntensityTextureEnabled!==e&&(this._RefractionIntensityTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get TranslucencyIntensityTextureEnabled(){return this._TranslucencyIntensityTextureEnabled}static set TranslucencyIntensityTextureEnabled(e){this._TranslucencyIntensityTextureEnabled!==e&&(this._TranslucencyIntensityTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get TranslucencyColorTextureEnabled(){return this._TranslucencyColorTextureEnabled}static set TranslucencyColorTextureEnabled(e){this._TranslucencyColorTextureEnabled!==e&&(this._TranslucencyColorTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}static get IridescenceTextureEnabled(){return this._IridescenceTextureEnabled}static set IridescenceTextureEnabled(e){this._IridescenceTextureEnabled!==e&&(this._IridescenceTextureEnabled=e,T.MarkAllMaterialsAsDirty(1))}}return t._DiffuseTextureEnabled=!0,t._BaseWeightTextureEnabled=!0,t._BaseDiffuseRoughnessTextureEnabled=!0,t._DetailTextureEnabled=!0,t._DecalMapEnabled=!0,t._AmbientTextureEnabled=!0,t._OpacityTextureEnabled=!0,t._ReflectionTextureEnabled=!0,t._EmissiveTextureEnabled=!0,t._SpecularTextureEnabled=!0,t._BumpTextureEnabled=!0,t._LightmapTextureEnabled=!0,t._RefractionTextureEnabled=!0,t._ColorGradingTextureEnabled=!0,t._FresnelEnabled=!0,t._ClearCoatTextureEnabled=!0,t._ClearCoatBumpTextureEnabled=!0,t._ClearCoatTintTextureEnabled=!0,t._SheenTextureEnabled=!0,t._AnisotropicTextureEnabled=!0,t._ThicknessTextureEnabled=!0,t._RefractionIntensityTextureEnabled=!0,t._TranslucencyIntensityTextureEnabled=!0,t._TranslucencyColorTextureEnabled=!0,t._IridescenceTextureEnabled=!0,t})()});function Fe(t,r,e){if(!t||t.LOGARITHMICDEPTH||t.indexOf&&t.indexOf("LOGARITHMICDEPTH")>=0){let a=e.activeCamera;a.mode===1&&O.Error("Logarithmic depth is not compatible with orthographic cameras!",20),r.setFloat("logarithmicDepthConstant",2/(Math.log(a.maxZ+1)/Math.LN2))}}var B=P(()=>{"use strict";x()});function ye(t,r,e,a=!1){e&&t.fogEnabled&&(!r||r.applyFog)&&t.fogMode!==0&&(e.setFloat4("vFogInfos",t.fogMode,t.fogStart,t.fogEnd,t.fogDensity),a?(t.fogColor.toLinearSpaceToRef(v,t.getEngine().useExactSrgbConversions),e.setColor3("vFogColor",v)):e.setColor3("vFogColor",t.fogColor))}function G(t,r,e,a,i,l,n,s,u,A){let E=t.numMaxInfluencers||t.numInfluencers;return E<=0?0:(r.push("#define MORPHTARGETS"),t.hasPositions&&r.push("#define MORPHTARGETTEXTURE_HASPOSITIONS"),t.hasNormals&&r.push("#define MORPHTARGETTEXTURE_HASNORMALS"),t.hasTangents&&r.push("#define MORPHTARGETTEXTURE_HASTANGENTS"),t.hasUVs&&r.push("#define MORPHTARGETTEXTURE_HASUVS"),t.hasUV2s&&r.push("#define MORPHTARGETTEXTURE_HASUV2S"),t.hasColors&&r.push("#define MORPHTARGETTEXTURE_HASCOLORS"),t.supportsPositions&&i&&r.push("#define MORPHTARGETS_POSITION"),t.supportsNormals&&l&&r.push("#define MORPHTARGETS_NORMAL"),t.supportsTangents&&n&&r.push("#define MORPHTARGETS_TANGENT"),t.supportsUVs&&s&&r.push("#define MORPHTARGETS_UV"),t.supportsUV2s&&u&&r.push("#define MORPHTARGETS_UV2"),t.supportsColors&&A&&r.push("#define MORPHTARGETS_COLOR"),r.push("#define NUM_MORPH_INFLUENCERS "+E),t.isUsingTextureForTargets&&r.push("#define MORPHTARGETS_TEXTURE"),p.NUM_MORPH_INFLUENCERS=E,p.NORMAL=l,p.TANGENT=n,p.UV=s,p.UV2=u,p.COLOR=A,V(e,a,p,i),E)}function Xe(t,r,e){p.NUM_MORPH_INFLUENCERS=e,p.NORMAL=!1,p.TANGENT=!1,p.UV=!1,p.UV2=!1,p.COLOR=!1,V(t,r,p,!0)}function V(t,r,e,a=!0){let i=e.NUM_MORPH_INFLUENCERS;if(i>0&&h.LastCreatedEngine){let l=h.LastCreatedEngine.getCaps().maxVertexAttribs,n=r.morphTargetManager;if(n?.isUsingTextureForTargets)return;let s=n&&n.supportsPositions&&a,u=n&&n.supportsNormals&&e.NORMAL,A=n&&n.supportsTangents&&e.TANGENT,E=n&&n.supportsUVs&&e.UV1,R=n&&n.supportsUV2s&&e.UV2,o=n&&n.supportsColors&&e.VERTEXCOLOR;for(let c=0;c<i;c++)s&&t.push("position"+c),u&&t.push("normal"+c),A&&t.push("tangent"+c),E&&t.push("uv_"+c),R&&t.push("uv2_"+c),o&&t.push("color"+c),t.length>l&&O.Error("Cannot add more vertex attributes for mesh "+r.name)}}function ue(t,r=!1){t.push("world0"),t.push("world1"),t.push("world2"),t.push("world3"),r&&(t.push("previousWorld0"),t.push("previousWorld1"),t.push("previousWorld2"),t.push("previousWorld3"))}function y(t,r){let e=t.morphTargetManager;!t||!e||r.setFloatArray("morphTargetInfluences",e.influences)}function ke(t,r){r.bindToEffect(t,"Scene")}function We(t,r,e,a,i=null,l=!1,n=!1,s=!1,u=!1,A=!1,E=!1,R=0){if(t.texturesEnabled&&i&&N.ReflectionTextureEnabled){if(e.updateMatrix("reflectionMatrix",i.getReflectionTextureMatrix()),e.updateFloat2("vReflectionInfos",i.level*t.iblIntensity,R),s&&i.boundingBoxSize){let o=i;e.updateVector3("vReflectionPosition",o.boundingBoxPosition),e.updateVector3("vReflectionSize",o.boundingBoxSize)}if(l){let o=i.getSize().width;e.updateFloat2("vReflectionFilteringInfo",o,Math.log2(o))}if(A&&!r.USEIRRADIANCEMAP){let o=i.sphericalPolynomial;if(r.USESPHERICALFROMREFLECTIONMAP&&o)if(r.SPHERICAL_HARMONICS){let c=o.preScaledHarmonics;e.updateVector3("vSphericalL00",c.l00),e.updateVector3("vSphericalL1_1",c.l1_1),e.updateVector3("vSphericalL10",c.l10),e.updateVector3("vSphericalL11",c.l11),e.updateVector3("vSphericalL2_2",c.l2_2),e.updateVector3("vSphericalL2_1",c.l2_1),e.updateVector3("vSphericalL20",c.l20),e.updateVector3("vSphericalL21",c.l21),e.updateVector3("vSphericalL22",c.l22)}else e.updateFloat3("vSphericalX",o.x.x,o.x.y,o.x.z),e.updateFloat3("vSphericalY",o.y.x,o.y.y,o.y.z),e.updateFloat3("vSphericalZ",o.z.x,o.z.y,o.z.z),e.updateFloat3("vSphericalXX_ZZ",o.xx.x-o.zz.x,o.xx.y-o.zz.y,o.xx.z-o.zz.z),e.updateFloat3("vSphericalYY_ZZ",o.yy.x-o.zz.x,o.yy.y-o.zz.y,o.yy.z-o.zz.z),e.updateFloat3("vSphericalZZ",o.zz.x,o.zz.y,o.zz.z),e.updateFloat3("vSphericalXY",o.xy.x,o.xy.y,o.xy.z),e.updateFloat3("vSphericalYZ",o.yz.x,o.yz.y,o.yz.z),e.updateFloat3("vSphericalZX",o.zx.x,o.zx.y,o.zx.z)}else u&&r.USEIRRADIANCEMAP&&r.USE_IRRADIANCE_DOMINANT_DIRECTION&&e.updateVector3("vReflectionDominantDirection",i.irradianceTexture._dominantDirection);n&&e.updateFloat3("vReflectionMicrosurfaceInfos",i.getSize().width,i.lodGenerationScale,i.lodGenerationOffset)}E&&e.updateColor3("vReflectionColor",a)}function ze(t,r,e,a=null,i=!1){if(a&&N.ReflectionTextureEnabled){r.LODBASEDMICROSFURACE?e.setTexture("reflectionSampler",a):(e.setTexture("reflectionSampler",a._lodTextureMid||a),e.setTexture("reflectionSamplerLow",a._lodTextureLow||a),e.setTexture("reflectionSamplerHigh",a._lodTextureHigh||a)),r.USEIRRADIANCEMAP&&e.setTexture("irradianceSampler",a.irradianceTexture);let l=t.iblCdfGenerator;i&&l&&e.setTexture("icdfSampler",l.getIcdfTexture())}}function we(t,r,e){r._needUVs=!0,r[e]=!0,t.optimizeUVAllocation&&t.getTextureMatrix().isIdentityAs3x2()?(r[e+"DIRECTUV"]=t.coordinatesIndex+1,r["MAINUV"+(t.coordinatesIndex+1)]=!0):r[e+"DIRECTUV"]=0}function Ye(t,r,e){let a=t.getTextureMatrix();r.updateMatrix(e+"Matrix",a)}function X(t,r,e){e.BAKED_VERTEX_ANIMATION_TEXTURE&&e.INSTANCES&&t.push("bakedVertexAnimationSettingsInstanced")}function Te(t,r){return r.set(t),r}function k(t,r,e){if(!(!r||!t)&&(t.computeBonesUsingShaders&&r._bonesComputationForcedToCPU&&(t.computeBonesUsingShaders=!1),t.useBones&&t.computeBonesUsingShaders&&t.skeleton)){let a=t.skeleton;if(a.isUsingTextureForMatrices&&r.getUniformIndex("boneTextureWidth")>-1){let i=a.getTransformMatrixTexture(t);r.setTexture("boneSampler",i),r.setFloat("boneTextureWidth",4*(a.bones.length+1))}else{let i=a.getTransformMatrices(t);i&&(r.setMatrices("mBones",i),e&&t.getScene().prePassRenderer&&t.getScene().prePassRenderer.getIndex(2)&&(e.previousBones[t.uniqueId]||(e.previousBones[t.uniqueId]=i.slice()),r.setMatrices("mPreviousBones",e.previousBones[t.uniqueId]),Te(i,e.previousBones[t.uniqueId])))}}}function Ze(t,r,e){t.transferToEffect(r,e+"")}function Ae(t,r,e,a,i,l=!0){t._bindLight(r,e,a,i,l)}function Qe(t,r,e,a,i=4){let l=Math.min(r.lightSources.length,i);for(let n=0;n<l;n++){let s=r.lightSources[n];Ae(s,n,t,e,typeof a=="boolean"?a:a.SPECULARTERM,r.receiveShadows)}}function Ke(t,r,e,a){e.NUM_BONE_INFLUENCERS>0&&(a.addCPUSkinningFallback(0,r),t.push("matricesIndices"),t.push("matricesWeights"),e.NUM_BONE_INFLUENCERS>4&&(t.push("matricesIndicesExtra"),t.push("matricesWeightsExtra")))}function qe(t,r){(r.INSTANCES||r.THIN_INSTANCES)&&ue(t,!!r.PREPASS_VELOCITY),r.INSTANCESCOLOR&&t.push("instanceColor")}function Je(t,r,e=4,a=0){let i=0;for(let l=0;l<e&&t["LIGHT"+l];l++)l>0&&(i=a+l,r.addFallback(i,"LIGHT"+l)),t.SHADOWS||(t["SHADOW"+l]&&r.addFallback(a,"SHADOW"+l),t["SHADOWPCF"+l]&&r.addFallback(a,"SHADOWPCF"+l),t["SHADOWPCSS"+l]&&r.addFallback(a,"SHADOWPCSS"+l),t["SHADOWPOISSON"+l]&&r.addFallback(a,"SHADOWPOISSON"+l),t["SHADOWESM"+l]&&r.addFallback(a,"SHADOWESM"+l),t["SHADOWCLOSEESM"+l]&&r.addFallback(a,"SHADOWCLOSEESM"+l));return i++}function ce(t,r){return r.fogEnabled&&t.applyFog&&r.fogMode!==0}function je(t,r,e,a,i,l,n,s=!1,u=!1,A,E){if(n._areMiscDirty){n.LOGARITHMICDEPTH=e,n.POINTSIZE=a,n.FOG=i&&ce(t,r),n.NONUNIFORMSCALING=t.nonUniformScaling,n.ALPHATEST=l,n.DECAL_AFTER_DETAIL=s,n.USE_VERTEX_PULLING=u,n.RIGHT_HANDED=r.useRightHandedSystem;let R=A?.geometry?.getIndexBuffer();n.VERTEX_PULLING_USE_INDEX_BUFFER=!!R,n.VERTEX_PULLING_INDEX_BUFFER_32BITS=R?R.is32Bits:!1,n.VERTEXOUTPUT_INVARIANT=!!E}}function $e(t,r,e,a,i=4,l=!1){if(!e._areLightsDirty)return e._needNormals;let n=0,s={needNormals:e._needNormals,needRebuild:!1,lightmapMode:!1,shadowEnabled:!1,specularEnabled:!1};if(t.lightsEnabled&&!l){for(let E of r.lightSources)if(pe(t,r,E,n,e,a,s),n++,n===i)break}e.SPECULARTERM=s.specularEnabled,e.SHADOWS=s.shadowEnabled;let u=Math.max(i,e.MAXLIGHTCOUNT||0);for(let E=n;E<u;E++)e["LIGHT"+E]!==void 0&&(e["LIGHT"+E]=!1,e["HEMILIGHT"+E]=!1,e["POINTLIGHT"+E]=!1,e["DIRLIGHT"+E]=!1,e["SPOTLIGHT"+E]=!1,e["AREALIGHT"+E]=!1,e["CLUSTLIGHT"+E]=!1,e["SHADOW"+E]=!1,e["SHADOWCSM"+E]=!1,e["SHADOWCSMDEBUG"+E]=!1,e["SHADOWCSMNUM_CASCADES"+E]=!1,e["SHADOWCSMUSESHADOWMAXZ"+E]=!1,e["SHADOWCSMNOBLEND"+E]=!1,e["SHADOWCSM_RIGHTHANDED"+E]=!1,e["SHADOWPCF"+E]=!1,e["SHADOWPCSS"+E]=!1,e["SHADOWPOISSON"+E]=!1,e["SHADOWESM"+E]=!1,e["SHADOWCLOSEESM"+E]=!1,e["SHADOWCUBE"+E]=!1,e["SHADOWLOWQUALITY"+E]=!1,e["SHADOWMEDIUMQUALITY"+E]=!1);e.MAXLIGHTCOUNT=i;let A=t.getEngine().getCaps();return e.SHADOWFLOAT===void 0&&(s.needRebuild=!0),e.SHADOWFLOAT=s.shadowEnabled&&(A.textureFloatRender&&A.textureFloatLinearFiltering||A.textureHalfFloatRender&&A.textureHalfFloatLinearFiltering),e.LIGHTMAPEXCLUDED=s.lightmapMode,s.needRebuild&&e.rebuild(),s.needNormals}function et(t,r,e,a=!1,i=8,l=!1){if(r&&N.ReflectionTextureEnabled){if(!r.isReadyOrNotBlocking())return!1;e._needNormals=!0,e.REFLECTION=!0,e.GAMMAREFLECTION=r.gammaSpace,e.RGBDREFLECTION=r.isRGBD,e.LODINREFLECTIONALPHA=r.lodLevelInAlpha,e.LINEARSPECULARREFLECTION=r.linearSpecularLOD,e.USEIRRADIANCEMAP=!1;let n=t.getEngine();switch(a&&i>0?(e.NUM_SAMPLES=""+i,n._features.needTypeSuffixInShaderConstants&&(e.NUM_SAMPLES=e.NUM_SAMPLES+"u"),e.REALTIME_FILTERING=!0,t.iblCdfGenerator&&(e.IBL_CDF_FILTERING=!0)):e.REALTIME_FILTERING=!1,e.INVERTCUBICMAP=r.coordinatesMode===S.INVCUBIC_MODE,e.REFLECTIONMAP_3D=r.isCube,e.REFLECTIONMAP_OPPOSITEZ=e.REFLECTIONMAP_3D&&t.useRightHandedSystem?!r.invertZ:r.invertZ,e.REFLECTIONMAP_CUBIC=!1,e.REFLECTIONMAP_EXPLICIT=!1,e.REFLECTIONMAP_PLANAR=!1,e.REFLECTIONMAP_PROJECTION=!1,e.REFLECTIONMAP_SKYBOX=!1,e.REFLECTIONMAP_SPHERICAL=!1,e.REFLECTIONMAP_EQUIRECTANGULAR=!1,e.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,e.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,r.coordinatesMode){case S.EXPLICIT_MODE:e.REFLECTIONMAP_EXPLICIT=!0;break;case S.PLANAR_MODE:e.REFLECTIONMAP_PLANAR=!0;break;case S.PROJECTION_MODE:e.REFLECTIONMAP_PROJECTION=!0;break;case S.SKYBOX_MODE:e.REFLECTIONMAP_SKYBOX=!0;break;case S.SPHERICAL_MODE:e.REFLECTIONMAP_SPHERICAL=!0;break;case S.EQUIRECTANGULAR_MODE:e.REFLECTIONMAP_EQUIRECTANGULAR=!0;break;case S.FIXED_EQUIRECTANGULAR_MODE:e.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!0;break;case S.FIXED_EQUIRECTANGULAR_MIRRORED_MODE:e.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!0;break;case S.CUBIC_MODE:case S.INVCUBIC_MODE:default:e.REFLECTIONMAP_CUBIC=!0,e.USE_LOCAL_REFLECTIONMAP_CUBIC=!!r.boundingBoxSize;break}r.coordinatesMode!==S.SKYBOX_MODE&&(r.irradianceTexture?(e.USEIRRADIANCEMAP=!0,e.USESPHERICALFROMREFLECTIONMAP=!1,e.USESPHERICALINVERTEX=!1,r.irradianceTexture._dominantDirection&&(e.USE_IRRADIANCE_DOMINANT_DIRECTION=!0)):r.isCube&&(e.USESPHERICALFROMREFLECTIONMAP=!0,e.USEIRRADIANCEMAP=!1,e.USE_IRRADIANCE_DOMINANT_DIRECTION=!1,e.USESPHERICALINVERTEX=l))}else e.REFLECTION=!1,e.REFLECTIONMAP_3D=!1,e.REFLECTIONMAP_SPHERICAL=!1,e.REFLECTIONMAP_PLANAR=!1,e.REFLECTIONMAP_CUBIC=!1,e.USE_LOCAL_REFLECTIONMAP_CUBIC=!1,e.REFLECTIONMAP_PROJECTION=!1,e.REFLECTIONMAP_SKYBOX=!1,e.REFLECTIONMAP_EXPLICIT=!1,e.REFLECTIONMAP_EQUIRECTANGULAR=!1,e.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,e.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,e.INVERTCUBICMAP=!1,e.USESPHERICALFROMREFLECTIONMAP=!1,e.USEIRRADIANCEMAP=!1,e.USE_IRRADIANCE_DOMINANT_DIRECTION=!1,e.USESPHERICALINVERTEX=!1,e.REFLECTIONMAP_OPPOSITEZ=!1,e.LODINREFLECTIONALPHA=!1,e.GAMMAREFLECTION=!1,e.RGBDREFLECTION=!1,e.LINEARSPECULARREFLECTION=!1;return!0}function pe(t,r,e,a,i,l,n){switch(n.needNormals=!0,i["LIGHT"+a]===void 0&&(n.needRebuild=!0),i["LIGHT"+a]=!0,i["SPOTLIGHT"+a]=!1,i["HEMILIGHT"+a]=!1,i["POINTLIGHT"+a]=!1,i["DIRLIGHT"+a]=!1,i["AREALIGHT"+a]=!1,i["CLUSTLIGHT"+a]=!1,e.prepareLightSpecificDefines(i,a),i["LIGHT_FALLOFF_PHYSICAL"+a]=!1,i["LIGHT_FALLOFF_GLTF"+a]=!1,i["LIGHT_FALLOFF_STANDARD"+a]=!1,e.falloffType){case L.FALLOFF_GLTF:i["LIGHT_FALLOFF_GLTF"+a]=!0;break;case L.FALLOFF_PHYSICAL:i["LIGHT_FALLOFF_PHYSICAL"+a]=!0;break;case L.FALLOFF_STANDARD:i["LIGHT_FALLOFF_STANDARD"+a]=!0;break}if(l&&!e.specular.equalsFloats(0,0,0)&&(n.specularEnabled=!0),i["SHADOW"+a]=!1,i["SHADOWCSM"+a]=!1,i["SHADOWCSMDEBUG"+a]=!1,i["SHADOWCSMNUM_CASCADES"+a]=!1,i["SHADOWCSMUSESHADOWMAXZ"+a]=!1,i["SHADOWCSMNOBLEND"+a]=!1,i["SHADOWCSM_RIGHTHANDED"+a]=!1,i["SHADOWPCF"+a]=!1,i["SHADOWPCSS"+a]=!1,i["SHADOWPOISSON"+a]=!1,i["SHADOWESM"+a]=!1,i["SHADOWCLOSEESM"+a]=!1,i["SHADOWCUBE"+a]=!1,i["SHADOWLOWQUALITY"+a]=!1,i["SHADOWMEDIUMQUALITY"+a]=!1,r&&r.receiveShadows&&t.shadowsEnabled&&e.shadowEnabled){let s=e.getShadowGenerator(t.activeCamera)??e.getShadowGenerator();if(s){let u=s.getShadowMap();u&&u.renderList&&u.renderList.length>0&&(n.shadowEnabled=!0,s.prepareDefines(i,a))}}e.lightmapMode!=L.LIGHTMAP_DEFAULT?(n.lightmapMode=!0,i["LIGHTMAPEXCLUDED"+a]=!0,i["LIGHTMAPNOSPECULAR"+a]=e.lightmapMode==L.LIGHTMAP_SHADOWSONLY):(i["LIGHTMAPEXCLUDED"+a]=!1,i["LIGHTMAPNOSPECULAR"+a]=!1)}function tt(t,r,e,a,i,l=null,n=!1){let s=_e(t,a);l!==!1&&(s=b(e,t,a)),a.DEPTHPREPASS!==!r.getColorWrite()&&(a.DEPTHPREPASS=!a.DEPTHPREPASS,s=!0),a.INSTANCES!==i&&(a.INSTANCES=i,s=!0),a.THIN_INSTANCES!==n&&(a.THIN_INSTANCES=n,s=!0),s&&a.markAsUnprocessed()}function Se(t,r){if(t.useBones&&t.computeBonesUsingShaders&&t.skeleton){r.NUM_BONE_INFLUENCERS=t.numBoneInfluencers;let e=r.BONETEXTURE!==void 0;if(t.skeleton.isUsingTextureForMatrices&&e)r.BONETEXTURE=!0;else{r.BonesPerMesh=t.skeleton.bones.length+1,r.BONETEXTURE=e?!1:void 0;let a=t.getScene().prePassRenderer;if(a&&a.enabled){let i=a.excludedSkinnedMesh.indexOf(t)===-1;r.BONES_VELOCITY_ENABLED=i}}}else r.NUM_BONE_INFLUENCERS=0,r.BonesPerMesh=0,r.BONETEXTURE!==void 0&&(r.BONETEXTURE=!1)}function Re(t,r){let e=t.morphTargetManager;e?(r.MORPHTARGETS_UV=e.supportsUVs&&r.UV1,r.MORPHTARGETS_UV2=e.supportsUV2s&&r.UV2,r.MORPHTARGETS_TANGENT=e.supportsTangents&&r.TANGENT,r.MORPHTARGETS_NORMAL=e.supportsNormals&&r.NORMAL,r.MORPHTARGETS_POSITION=e.supportsPositions,r.MORPHTARGETS_COLOR=e.supportsColors,r.MORPHTARGETTEXTURE_HASUVS=e.hasUVs,r.MORPHTARGETTEXTURE_HASUV2S=e.hasUV2s,r.MORPHTARGETTEXTURE_HASTANGENTS=e.hasTangents,r.MORPHTARGETTEXTURE_HASNORMALS=e.hasNormals,r.MORPHTARGETTEXTURE_HASPOSITIONS=e.hasPositions,r.MORPHTARGETTEXTURE_HASCOLORS=e.hasColors,r.NUM_MORPH_INFLUENCERS=e.numMaxInfluencers||e.numInfluencers,r.MORPHTARGETS=r.NUM_MORPH_INFLUENCERS>0,r.MORPHTARGETS_TEXTURE=e.isUsingTextureForTargets):(r.MORPHTARGETS_UV=!1,r.MORPHTARGETS_UV2=!1,r.MORPHTARGETS_TANGENT=!1,r.MORPHTARGETS_NORMAL=!1,r.MORPHTARGETS_POSITION=!1,r.MORPHTARGETS_COLOR=!1,r.MORPHTARGETTEXTURE_HASUVS=!1,r.MORPHTARGETTEXTURE_HASUV2S=!1,r.MORPHTARGETTEXTURE_HASTANGENTS=!1,r.MORPHTARGETTEXTURE_HASNORMALS=!1,r.MORPHTARGETTEXTURE_HASPOSITIONS=!1,r.MORPHTARGETTEXTURE_HAS_COLORS=!1,r.MORPHTARGETS=!1,r.NUM_MORPH_INFLUENCERS=0)}function Pe(t,r){let e=t.bakedVertexAnimationManager;r.BAKED_VERTEX_ANIMATION_TEXTURE=!!(e&&e.isEnabled)}function rt(t,r,e,a,i=!1,l=!0,n=!0){if(!r._areAttributesDirty&&r._needNormals===r._normals&&r._needUVs===r._uvs)return!1;r._normals=r._needNormals,r._uvs=r._needUVs,r.NORMAL=r._needNormals&&t.isVerticesDataPresent("normal"),r._needNormals&&t.isVerticesDataPresent("tangent")&&(r.TANGENT=!0);for(let s=1;s<=6;++s)r["UV"+s]=r._needUVs?t.isVerticesDataPresent(`uv${s===1?"":s}`):!1;if(e){let s=t.useVertexColors&&t.isVerticesDataPresent("color");r.VERTEXCOLOR=s,r.VERTEXALPHA=t.hasVertexAlpha&&s&&l}return t.isVerticesDataPresent("instanceColor")&&(t.hasInstances||t.hasThinInstances)&&(r.INSTANCESCOLOR=!0),a&&Se(t,r),i&&Re(t,r),n&&Pe(t,r),!0}function at(t,r){if(t.activeCamera){let e=r.MULTIVIEW;r.MULTIVIEW=t.activeCamera.outputRenderTarget!==null&&t.activeCamera.outputRenderTarget.getViewCount()>1,r.MULTIVIEW!=e&&r.markAsUnprocessed()}}function it(t,r,e){let a=r.ORDER_INDEPENDENT_TRANSPARENCY,i=r.ORDER_INDEPENDENT_TRANSPARENCY_16BITS;r.ORDER_INDEPENDENT_TRANSPARENCY=t.useOrderIndependentTransparency&&e,r.ORDER_INDEPENDENT_TRANSPARENCY_16BITS=!t.getEngine().getCaps().textureFloatLinearFiltering,(a!==r.ORDER_INDEPENDENT_TRANSPARENCY||i!==r.ORDER_INDEPENDENT_TRANSPARENCY_16BITS)&&r.markAsUnprocessed()}function nt(t,r,e){let a=r.PREPASS;if(!r._arePrePassDirty)return;let i=[{type:1,define:"PREPASS_POSITION",index:"PREPASS_POSITION_INDEX"},{type:9,define:"PREPASS_LOCAL_POSITION",index:"PREPASS_LOCAL_POSITION_INDEX"},{type:2,define:"PREPASS_VELOCITY",index:"PREPASS_VELOCITY_INDEX"},{type:11,define:"PREPASS_VELOCITY_LINEAR",index:"PREPASS_VELOCITY_LINEAR_INDEX"},{type:3,define:"PREPASS_REFLECTIVITY",index:"PREPASS_REFLECTIVITY_INDEX"},{type:0,define:"PREPASS_IRRADIANCE",index:"PREPASS_IRRADIANCE_INDEX"},{type:7,define:"PREPASS_ALBEDO_SQRT",index:"PREPASS_ALBEDO_SQRT_INDEX"},{type:5,define:"PREPASS_DEPTH",index:"PREPASS_DEPTH_INDEX"},{type:10,define:"PREPASS_SCREENSPACE_DEPTH",index:"PREPASS_SCREENSPACE_DEPTH_INDEX"},{type:6,define:"PREPASS_NORMAL",index:"PREPASS_NORMAL_INDEX"},{type:8,define:"PREPASS_WORLD_NORMAL",index:"PREPASS_WORLD_NORMAL_INDEX"}];if(t.prePassRenderer&&t.prePassRenderer.enabled&&e){r.PREPASS=!0,r.SCENE_MRT_COUNT=t.prePassRenderer.mrtCount,r.PREPASS_NORMAL_WORLDSPACE=t.prePassRenderer.generateNormalsInWorldSpace,r.PREPASS_COLOR=!0,r.PREPASS_COLOR_INDEX=0;for(let l=0;l<i.length;l++){let n=t.prePassRenderer.getIndex(i[l].type);n!==-1?(r[i[l].define]=!0,r[i[l].index]=n):r[i[l].define]=!1}}else{r.PREPASS=!1;for(let l=0;l<i.length;l++)r[i[l].define]=!1}r.PREPASS!=a&&(r.markAsUnprocessed(),r.markAsImageProcessingDirty())}function _e(t,r){let e=!1;if(t.activeCamera){let a=r.CAMERA_ORTHOGRAPHIC?1:0,i=r.CAMERA_PERSPECTIVE?1:0,l=t.activeCamera.mode===1?1:0,n=t.activeCamera.mode===0?1:0;(a^l||i^n)&&(r.CAMERA_ORTHOGRAPHIC=l===1,r.CAMERA_PERSPECTIVE=n===1,e=!0)}return e}function Ce(t,r,e,a,i=null,l=!1,n=!1,s=!1){i&&i.push("Light"+t),!l&&(r.push("vLightData"+t,"vLightDiffuse"+t,"vLightSpecular"+t,"vLightDirection"+t,"vLightWidth"+t,"vLightHeight"+t,"vLightFalloff"+t,"vLightGround"+t,"vSliceData"+t,"vSliceRanges"+t,"lightMatrix"+t,"shadowsInfo"+t,"depthValues"+t),e.push("shadowTexture"+t),e.push("depthTexture"+t),r.push("viewFrustumZ"+t,"cascadeBlendFactor"+t,"lightSizeUVCorrection"+t,"depthCorrection"+t,"penumbraDarkness"+t,"frustumLengths"+t),a&&(e.push("projectionLightTexture"+t),r.push("textureProjectionMatrix"+t)),n&&e.push("iesLightTexture"+t),s&&(e.push("lightDataTexture"+t),e.push("tileMaskTexture"+t)))}function lt(t,r,e){let a=["vReflectionMicrosurfaceInfos","vReflectionDominantDirection","reflectionMatrix","vReflectionInfos","vReflectionPosition","vReflectionSize","vReflectionColor","vReflectionFilteringInfo"];e&&a.push("vSphericalX","vSphericalY","vSphericalZ","vSphericalXX_ZZ","vSphericalYY_ZZ","vSphericalZZ","vSphericalXY","vSphericalYZ","vSphericalZX","vSphericalL00","vSphericalL1_1","vSphericalL10","vSphericalL11","vSphericalL2_2","vSphericalL2_1","vSphericalL20","vSphericalL21","vSphericalL22"),t.push(...a);let i=["reflectionSampler","reflectionSamplerLow","reflectionSamplerHigh","irradianceSampler","icdfSampler"];r.push(...i)}function st(t,r,e,a=4){let i,l;if(t.uniformsNames){let n=t;i=n.uniformsNames,l=n.uniformBuffersNames,r=n.samplers,e=n.defines,a=n.maxSimultaneousLights||0}else i=t,r||(r=[]);for(let n=0;n<a&&e["LIGHT"+n];n++)Ce(n,i,r,e["PROJECTEDLIGHTTEXTURE"+n],l,!1,e["IESLIGHTTEXTURE"+n],e["CLUSTLIGHT"+n]);e.NUM_MORPH_INFLUENCERS&&(i.push("morphTargetInfluences"),i.push("morphTargetCount")),e.BAKED_VERTEX_ANIMATION_TEXTURE&&(i.push("bakedVertexAnimationSettings"),i.push("bakedVertexAnimationTextureSizeInverted"),i.push("bakedVertexAnimationTime"),r.push("bakedVertexAnimationTexture"))}function ot(t,r=!1,e=!1,a=!1,i=!1,l=!1){t.addUniform("vReflectionInfos",2),t.addUniform("reflectionMatrix",16),r&&t.addUniform("vReflectionMicrosurfaceInfos",3),e&&(t.addUniform("vReflectionPosition",3),t.addUniform("vReflectionSize",3)),a&&(t.addUniform("vReflectionFilteringInfo",2),t.addUniform("vReflectionDominantDirection",3)),l&&t.addUniform("vReflectionColor",3),i&&(t.addUniform("vSphericalL00",3),t.addUniform("vSphericalL1_1",3),t.addUniform("vSphericalL10",3),t.addUniform("vSphericalL11",3),t.addUniform("vSphericalL2_2",3),t.addUniform("vSphericalL2_1",3),t.addUniform("vSphericalL20",3),t.addUniform("vSphericalL21",3),t.addUniform("vSphericalL22",3),t.addUniform("vSphericalX",3),t.addUniform("vSphericalY",3),t.addUniform("vSphericalZ",3),t.addUniform("vSphericalXX_ZZ",3),t.addUniform("vSphericalYY_ZZ",3),t.addUniform("vSphericalZZ",3),t.addUniform("vSphericalXY",3),t.addUniform("vSphericalYZ",3),t.addUniform("vSphericalZX",3))}var v,p,W=P(()=>{"use strict";x();K();$();g();H();te();B();v={r:0,g:0,b:0},p={NUM_MORPH_INFLUENCERS:0,NORMAL:!1,TANGENT:!1,UV:!1,UV2:!1,COLOR:!1}});var z,Ie,w=P(()=>{"use strict";U();re();ae();ie();ne();le();se();oe();Ee();z="gpuTransformVertexShader",Ie=`attribute vec3 position;
#include<bonesDeclaration>
#include<bakedVertexAnimationDeclaration>
#include<morphTargetsVertexGlobalDeclaration>
#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]
out vec3 outPosition;const mat4 identity=mat4(
vec4(1.0,0.0,0.0,0.0),
vec4(0.0,1.0,0.0,0.0),
vec4(0.0,0.0,1.0,0.0),
vec4(0.0,0.0,0.0,1.0)
);void main(void) {vec3 positionUpdated=position;
#include<morphTargetsVertexGlobal>
#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]
mat4 finalWorld=identity;
#include<bonesVertex>
#include<bakedVertexAnimation>
vec4 worldPos=finalWorld*vec4(positionUpdated,1.0);outPosition=worldPos.xyz;}`;I.ShadersStore[z]||(I.ShadersStore[z]=Ie)});var Y,Le,Z=P(()=>{"use strict";U();Y="gpuTransformPixelShader",Le=`#version 300 es
void main() {discard;}
`;I.ShadersStore[Y]||(I.ShadersStore[Y]=Le)});var M,fe=P(()=>{J();W();ee();D();w();Z();M=class t{constructor(r){this._buffers={},this._effects={},this._meshListCounter=0,this._engine=r}processAsync(r){return Array.isArray(r)||(r=[r]),this._meshListCounter=0,this._processMeshList(r),Promise.resolve()}_processMeshList(r){let e=this._engine.getCaps().parallelShaderCompile;this._engine.getCaps().parallelShaderCompile=void 0;for(let a=0;a<r.length;++a){let i=r[a];if(i.getTotalVertices()===0||!i.getVertexBuffer||!i.getVertexBuffer(_.PositionKind))continue;let n,s=[],u=[_.PositionKind];i&&i.useBones&&i.computeBonesUsingShaders&&i.skeleton?(u.push(_.MatricesIndicesKind),u.push(_.MatricesWeightsKind),i.numBoneInfluencers>4&&(u.push(_.MatricesIndicesExtraKind),u.push(_.MatricesWeightsExtraKind)),s.push("#define NUM_BONE_INFLUENCERS "+i.numBoneInfluencers),s.push("#define BONETEXTURE "+i.skeleton.isUsingTextureForMatrices),s.push("#define BonesPerMesh "+(i.skeleton.bones.length+1))):s.push("#define NUM_BONE_INFLUENCERS 0");let A=i.morphTargetManager?G(i.morphTargetManager,s,u,i,!0,!1,!1,!1,!1,!1):0,E=i.bakedVertexAnimationManager;E&&E.isEnabled&&(s.push("#define BAKED_VERTEX_ANIMATION_TEXTURE"),X(u,i,s));let R=s.join(`
`);if(this._effects[R])n=this._effects[R];else{let Q={attributes:u,uniformsNames:["boneTextureWidth","mBones","morphTargetInfluences","morphTargetCount","morphTargetTextureInfo","morphTargetTextureIndices","bakedVertexAnimationSettings","bakedVertexAnimationTextureSizeInverted","bakedVertexAnimationTime"],uniformBuffersNames:[],samplers:["boneSampler","morphTargets","bakedVertexAnimationTexture"],defines:R,fallbacks:null,onCompiled:null,onError:null,indexParameters:{maxSimultaneousMorphTargets:A},maxSimultaneousLights:0,transformFeedbackVaryings:["outPosition"]};n=this._engine.createEffect("gpuTransform",Q,this._engine),this._effects[R]=n}this._compute(i,n)}this._engine.getCaps().parallelShaderCompile=e}_compute(r,e){let a=this._engine,i,l=r.getTotalVertices();if(this._buffers[r.uniqueId])i=this._buffers[r.uniqueId];else{let u=new Float32Array(l*3);i=new m(r.getEngine(),u,!0,3),this._buffers[r.uniqueId]=i}e.getEngine().enableEffect(e),r._bindDirect(e,null,!0),k(r,e),y(r,e),r.morphTargetManager&&r.morphTargetManager.isUsingTextureForTargets&&r.morphTargetManager._bind(e);let n=r.bakedVertexAnimationManager;n&&n.isEnabled&&r.bakedVertexAnimationManager?.bind(e,!1);let s=i.getData();if(a.bindTransformFeedbackBuffer(i.getBuffer()),a.setRasterizerState(!1),a.beginTransformFeedback(!0),a.drawArraysType(2,0,l),a.endTransformFeedback(),a.setRasterizerState(!0),a.readTransformFeedbackBuffer(s),a.bindTransformFeedbackBuffer(null),this._meshListCounter===0)r._refreshBoundingInfo(s,null);else{let u=r.getBoundingInfo().boundingBox,A=F(s,0,l);t._Min.copyFrom(u.minimum).minimizeInPlace(A.minimum),t._Max.copyFrom(u.maximum).maximizeInPlace(A.maximum),r._refreshBoundingInfoDirect({minimum:t._Min,maximum:t._Max})}}registerMeshListAsync(r){return Array.isArray(r)||(r=[r]),this._meshList=r,this._meshListCounter=0,Promise.resolve()}processMeshList(){this._meshList.length!==0&&(this._processMeshList(this._meshList),this._meshListCounter++)}fetchResultsForMeshListAsync(){return this._meshListCounter=0,Promise.resolve()}dispose(){for(let r in this._buffers)this._buffers[r].dispose();this._buffers={},this._effects={},this._engine=null}};M._Min=new C;M._Max=new C});export{Me as a,he as b,b as c,De as d,g as e,N as f,H as g,Fe as h,B as i,ye as j,G as k,Xe as l,V as m,ue as n,y as o,ke as p,We as q,ze as r,we as s,Ye as t,X as u,k as v,Ze as w,Ae as x,Qe as y,Ke as z,qe as A,Je as B,ce as C,je as D,$e as E,et as F,pe as G,tt as H,Se as I,Re as J,Pe as K,rt as L,at as M,it as N,nt as O,_e as P,Ce as Q,lt as R,st as S,ot as T,W as U,M as V,fe as W};
