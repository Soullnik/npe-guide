import{b as h,h as v}from"./chunk-PH4NQ2ZM.js";import{a as c,b}from"./chunk-M4NDENQ4.js";import{a as f,b as ee}from"./chunk-XC3GOAHG.js";import{J as M,K,h as x,j as p,k as E,l as w,m as s,o as O,t as a,w as m,z as J}from"./chunk-Q33HFBOA.js";import{A as $,v as u,w as _,x as l}from"./chunk-HPFLS2LJ.js";import{a as n,d as W}from"./chunk-A2QYPOYP.js";import{j as d,z as H}from"./chunk-W4M4SCHI.js";import{e as y}from"./chunk-FAF55DAL.js";function ie(t,e){return`{X: ${t.x.toFixed(e)} Y: ${t.y.toFixed(e)}}`}function I(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}function te(t){return t.x*t.x+t.y*t.y+t.z*t.z}function oe(t){return Math.sqrt(te(t))}function re(t,e){let o=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return o*o+r*r+i*i}function ae(t,e){return Math.sqrt(re(t,e))}function pe(t,e,o,r){return r.x=t,r.y=e,r.z=o,r}function xe(t,e,o){return o.x=t.x*e,o.y=t.y*e,o.z=t.z*e,o}function ue(t,e){return t.x*=e,t.y*=e,t.z*=e,t}function le(t,e,o){return o.x=t.x-e.x,o.y=t.y-e.y,o.z=t.z-e.z,o}function he(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e}function me(t,e,o,r){return r.x=t.x+(e.x-t.x)*o,r.y=t.y+(e.y-t.y)*o,r.z=t.z+(e.z-t.z)*o,r}function fe(t,e){let o=oe(t);return o===0?(e.x=0,e.y=0,e.z=0):(e.x=t.x/o,e.y=t.y/o,e.z=t.z/o),e}function Ve(t,e){return`{X: ${t.x.toFixed(e)} Y: ${t.y.toFixed(e)} Z: ${t.z.toFixed(e)}}`}function L(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w}function ye(t,e){return`{X: ${t.x.toFixed(e)} Y: ${t.y.toFixed(e)} Z: ${t.z.toFixed(e)} W: ${t.w.toFixed(e)}}`}var S=y(()=>{"use strict"});function q(t,e){return Math.acos(d(L(t,e),-1,1))*2}function X(t,e){let o=new l;return ne(t,e,o),o}function ne(t,e,o){let r=u.Cross(t,e),i=Math.acos(d(I(t,e),-1,1));return l.RotationAxisToRef(r,i,o),o}var Y=y(()=>{"use strict";H();$();S()});function se(t,e){switch(h(t)){case"Vector2":return e.transformVector(t);case"Vector3":return e.transformVector(t);case"Vector4":return t=t,new _(t.x*e.m[0]+t.y*e.m[1]+t.z*e.m[2]+t.w*e.m[3],t.x*e.m[4]+t.y*e.m[5]+t.z*e.m[6]+t.w*e.m[7],t.x*e.m[8]+t.y*e.m[9]+t.z*e.m[10]+t.w*e.m[11],t.x*e.m[12]+t.y*e.m[13]+t.z*e.m[14]+t.w*e.m[15]);default:throw new Error(`Cannot transform value ${t}`)}}var Z,j,P,g,z,F,T,G,R,B,D,N,A,k,C,U,ce=y(()=>{K();J();W();b();ee();$();v();Y();Z="cachedOperationAxis",j="cachedOperationAngle",P="cachedExecutionId",g=class extends f{constructor(e){super(x,p,o=>this._polymorphicLength(o),"FlowGraphLengthBlock",e)}_polymorphicLength(e){switch(h(e)){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return e.length();default:throw new Error(`Cannot compute length of value ${e}`)}}};n("FlowGraphLengthBlock",g);z=class extends f{constructor(e){super(x,x,o=>this._polymorphicNormalize(o),"FlowGraphNormalizeBlock",e)}_polymorphicNormalize(e){let o=h(e),r;switch(o){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return r=e.normalizeToNew(),this.config?.nanOnZeroLength&&e.length()===0&&r.setAll(NaN),r;default:throw new Error(`Cannot normalize value ${e}`)}}};n("FlowGraphNormalizeBlock",z);F=class extends c{constructor(e){super(x,x,p,(o,r)=>this._polymorphicDot(o,r),"FlowGraphDotBlock",e)}_polymorphicDot(e,o){switch(h(e)){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return e.dot(o);default:throw new Error(`Cannot get dot product of ${e} and ${o}`)}}};n("FlowGraphDotBlock",F);T=class extends c{constructor(e){super(s,s,s,(o,r)=>u.Cross(o,r),"FlowGraphCrossBlock",e)}};n("FlowGraphCrossBlock",T);G=class extends c{constructor(e){super(w,p,w,(o,r)=>o.rotate(r),"FlowGraphRotate2DBlock",e)}};n("FlowGraphRotate2DBlock",G);R=class extends c{constructor(e){super(s,a,s,(o,r)=>o.applyRotationQuaternion(r),"FlowGraphRotate3DBlock",e)}};n("FlowGraphRotate3DBlock",R);B=class extends c{constructor(e){let o=e?.vectorType||"Vector3",r=o==="Vector2"?"Matrix2D":o==="Vector3"?"Matrix3D":"Matrix";super(m(o),m(r),m(o),se,"FlowGraphTransformVectorBlock",e)}};n("FlowGraphTransformVectorBlock",B);D=class extends c{constructor(e){super(s,O,s,(o,r)=>u.TransformCoordinates(o,r),"FlowGraphTransformCoordinatesBlock",e)}};n("FlowGraphTransformCoordinatesBlock",D);N=class extends f{constructor(e){super(a,a,o=>o.conjugate(),"FlowGraphConjugateBlock",e)}};n("FlowGraphConjugateBlock",N);A=class extends c{constructor(e){super(a,a,p,(o,r)=>q(o,r),"FlowGraphAngleBetweenBlock",e)}};n("FlowGraphAngleBetweenBlock",A);k=class extends c{constructor(e){super(s,p,a,(o,r)=>l.RotationAxis(o,r),"FlowGraphQuaternionFromAxisAngleBlock",e)}};n("FlowGraphQuaternionFromAxisAngleBlock",k);C=class extends M{constructor(e){super(e),this.a=this.registerDataInput("a",a),this.axis=this.registerDataOutput("axis",s),this.angle=this.registerDataOutput("angle",p),this.isValid=this.registerDataOutput("isValid",E)}_updateOutputs(e){let o=e._getExecutionVariable(this,P,-1),r=e._getExecutionVariable(this,Z,null),i=e._getExecutionVariable(this,j,null);if(r!=null&&i!==void 0&&i!==null&&o===e.executionId)this.axis.setValue(r,e),this.angle.setValue(i,e);else try{let{axis:V,angle:Q}=this.a.getValue(e).toAxisAngle();e._setExecutionVariable(this,Z,V),e._setExecutionVariable(this,j,Q),e._setExecutionVariable(this,P,e.executionId),this.axis.setValue(V,e),this.angle.setValue(Q,e),this.isValid.setValue(!0,e)}catch{this.isValid.setValue(!1,e)}}getClassName(){return"FlowGraphAxisAngleFromQuaternionBlock"}};n("FlowGraphAxisAngleFromQuaternionBlock",C);U=class extends c{constructor(e){super(s,s,a,(o,r)=>X(o,r),"FlowGraphQuaternionFromDirectionsBlock",e)}}});export{ie as a,I as b,te as c,oe as d,re as e,ae as f,pe as g,xe as h,ue as i,le as j,he as k,me as l,fe as m,Ve as n,L as o,ye as p,S as q,g as r,z as s,F as t,T as u,G as v,R as w,B as x,D as y,N as z,A,k as B,C,U as D,ce as E};
